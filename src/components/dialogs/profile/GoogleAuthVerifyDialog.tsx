// React Imports

// MUI Imports
import Button from '@mui/material/Button'
import { Divider, Grid, IconButton, InputAdornment, MenuItem, Typography } from '@mui/material'

import { useDialog } from '@/hooks/useDialog'
import CustomTextField from '@/@core/components/mui/TextField'
import { useState } from 'react'
import CodeInput from '@/components/CodeInput'
import {
  useFetchQrCodeGoogleMutationOption,
  useSetGoogleVerifyMutationOption
} from '@/queryOptions/profile/profileQueryOptions'
import { toast } from 'react-toastify'
import { useAuthStore } from '@/store/useAuthStore'
import { fetchProfile } from '@/app/sevices/profile/profileServices'
import Axios from '@/libs/axios/axios'
import { useDictionary } from '@/contexts/DictionaryContext'

interface googleDialogProps {
  id: string
}

const GoogleAuthVerifyDialog = ({ id }: googleDialogProps) => {
  const { dictionary } = useDictionary()
  const { closeDialog } = useDialog()
  const [activeStep, setActiveStep] = useState(0)
  const [googleCode, setGoogleCode] = useState('')

  const { data: qrcode, isPending: pendingQrcode, error: errorQrcode } = useFetchQrCodeGoogleMutationOption()

  const { mutateAsync, isPending } = useSetGoogleVerifyMutationOption()

  const nextStep = () => {
    if (activeStep < 2) setActiveStep(prev => prev + 1)
  }

  const prevStep = () => {
    if (activeStep > 0) setActiveStep(prev => prev - 1)
  }

  const handleKeepGooleCode = (code: string) => {
    setGoogleCode(code)
    handleSetGoogle(code)
  }

  const handleSetGoogle = async (code: string) => {
    try {
      const response = await mutateAsync({ secret: qrcode?.data?.secret, pincode: code || googleCode })

      if (response?.code == 'SUCCESS') {
        toast.success('Add Google Authenticator completed!', { autoClose: 3000 })

        const resultProfile = await fetchProfile()
        if (resultProfile?.data) {
          useAuthStore.getState().setProfile(resultProfile.data)
          closeDialog(id)
        } else {
          toast.error('failed to get profile ,please login again', { autoClose: 3000 })
          const response = await Axios.get('/logout')

          if (response?.data?.code == 'SUCCESS') {
            useAuthStore.getState().clearTokens()
          }
        }
      }
    } catch (error) {
      console.log('erorr', error)
      if ((error as { code?: string })?.code === 'OTP_NOT_MATCH') {
        toast.error('Failed, code mismatch', { autoClose: 3000 })
      } else {
        toast.error('Failed to add 2FA Google!', { autoClose: 3000 })
      }
    }
  }

  return (
    <Grid container className='flex flex-col gap-2' spacing={2}>
      <Grid item xs={12}>
        <Typography variant='h5'>{dictionary['profile']?.googleSetup}</Typography>
      </Grid>
      <Divider />
      <Grid container spacing={4}>
        {activeStep === 0 && (
          <>
            <Grid item xs={12}>
              <Typography>{dictionary['profile']?.googleDetail}</Typography>
            </Grid>
            <Grid item xs={12}>
              <div className='flex  gap-2'>
                <Typography className=' text-nowrap'>Step 1:</Typography>
                <div className='flex flex-col gap-2'>
                  <Typography>{dictionary['profile']?.loadGoogle}</Typography>

                  <div className='flex gap-4'>
                    <button
                      className=' cursor-pointer'
                      onClick={() =>
                        window.open('https://apps.apple.com/app/google-authenticator/id388497605', '_blank')
                      }
                    >
                      <svg xmlns='http://www.w3.org/2000/svg' width='120' height='36' viewBox='0 0 120 36' fill='none'>
                        <g clipPath='url(#clip0_1174_23455)'>
                          <path
                            d='M119.087 31.6979C119.087 32.1493 118.998 32.5963 118.827 33.0132C118.656 33.4302 118.405 33.809 118.089 34.128C117.772 34.447 117.397 34.7 116.983 34.8724C116.57 35.0448 116.127 35.1333 115.68 35.1328H4.20146C3.29792 35.1338 2.431 34.7725 1.79135 34.1283C1.1517 33.4842 0.791705 32.61 0.790527 31.6979V4.30561C0.791704 3.39317 1.15156 2.51849 1.79108 1.87363C2.4306 1.22877 3.29751 0.866448 4.20146 0.866211H115.679C116.127 0.866211 116.57 0.95518 116.983 1.12804C117.396 1.30089 117.772 1.55425 118.088 1.87364C118.405 2.19303 118.656 2.57219 118.827 2.98948C118.998 3.40676 119.086 3.85398 119.086 4.30561L119.087 31.6979Z'
                            fill='white'
                          />
                          <path
                            d='M115.68 35.9323H4.20169C3.08864 35.932 2.02113 35.4861 1.23342 34.6923C0.445702 33.8986 0.00211784 32.8218 0 31.6983L0 4.30684C0.00164661 3.18277 0.444938 2.10526 1.23263 1.31067C2.02032 0.516081 3.08809 0.0693081 4.20169 0.0683594L115.679 0.0683594C116.793 0.0697815 117.86 0.516706 118.648 1.31119C119.436 2.10568 119.879 3.18292 119.881 4.30684V31.6983C119.883 34.0336 117.995 35.9323 115.68 35.9323Z'
                            fill='#A6A6A6'
                          />
                          <path
                            d='M119.087 31.6979C119.087 32.1493 118.998 32.5963 118.827 33.0132C118.656 33.4302 118.405 33.809 118.089 34.128C117.772 34.447 117.397 34.7 116.983 34.8724C116.57 35.0448 116.127 35.1333 115.68 35.1328H4.20146C3.29792 35.1338 2.431 34.7725 1.79135 34.1283C1.1517 33.4842 0.791705 32.61 0.790527 31.6979V4.30561C0.791704 3.39317 1.15156 2.51849 1.79108 1.87363C2.4306 1.22877 3.29751 0.866448 4.20146 0.866211H115.679C116.127 0.866211 116.57 0.95518 116.983 1.12804C117.396 1.30089 117.772 1.55425 118.088 1.87364C118.405 2.19303 118.656 2.57219 118.827 2.98948C118.998 3.40676 119.086 3.85398 119.086 4.30561L119.087 31.6979Z'
                            fill='black'
                          />
                          <path
                            d='M26.7688 17.811C26.743 14.9205 29.1135 13.5143 29.2219 13.4488C27.8794 11.473 25.7985 11.2031 25.0673 11.1816C23.3196 10.9959 21.6244 12.2372 20.7341 12.2372C19.8261 12.2372 18.4551 11.1995 16.9775 11.23C15.0762 11.2596 13.2974 12.3708 12.3218 14.0963C10.3085 17.6146 11.8101 22.7849 13.739 25.6288C14.7039 27.0225 15.8314 28.5768 17.3072 28.522C18.751 28.4629 19.2903 27.5938 21.0326 27.5938C22.759 27.5938 23.2654 28.5221 24.7705 28.4871C26.3201 28.4629 27.2956 27.088 28.2268 25.6826C29.3418 24.0872 29.7896 22.5141 29.8074 22.4334C29.7719 22.4208 26.799 21.2747 26.7688 17.811ZM23.9256 9.31075C24.7021 8.3305 25.2334 6.99689 25.086 5.64355C23.962 5.69378 22.5564 6.42829 21.747 7.38702C21.0309 8.23185 20.3911 9.61657 20.5564 10.9188C21.819 11.0139 23.1153 10.2758 23.9256 9.31075Z'
                            fill='white'
                          />
                          <path
                            d='M115.681 0.0683594H55.9692L79.3571 35.9323H115.681C116.794 35.9313 117.861 35.4848 118.649 34.6906C119.437 33.8964 119.88 32.8193 119.882 31.6956V4.30684C119.88 3.18285 119.437 2.10547 118.649 1.31093C117.862 0.516393 116.794 0.0695449 115.681 0.0683594Z'
                            fill='url(#paint0_linear_1174_23455)'
                          />
                          <path
                            d='M47.681 28.3228H45.6632L44.5579 24.8171H40.7161L39.6632 28.3228H37.6987L41.5059 16.3876H43.8569L47.681 28.3228ZM44.2247 23.3462L43.2252 20.2297C43.1194 19.9113 42.9204 19.1616 42.629 17.9813H42.5935C42.4762 18.4889 42.2887 19.2387 42.0319 20.2297L41.0492 23.3462H44.2247ZM57.4527 23.9139C57.4527 25.3776 57.059 26.5345 56.271 27.3838C55.5655 28.1399 54.6885 28.5174 53.6428 28.5174C52.5135 28.5174 51.7014 28.1112 51.2083 27.2968V31.8124H49.314V22.5453C49.314 21.6261 49.29 20.6835 49.2438 19.7167H50.9098L51.0155 21.0808H51.051C51.6828 20.053 52.6414 19.5391 53.928 19.5391C54.9338 19.5391 55.7734 19.94 56.4451 20.7427C57.1159 21.5472 57.4527 22.6036 57.4527 23.9139ZM55.5228 23.9839C55.5228 23.1462 55.3363 22.4557 54.9613 21.9113C54.5517 21.3454 54.0017 21.062 53.3123 21.062C52.8449 21.062 52.4202 21.2198 52.0408 21.531C51.6605 21.8449 51.4118 22.2548 51.2954 22.7624C51.2434 22.9522 51.2139 23.1476 51.2074 23.3444V24.7803C51.2074 25.4054 51.3976 25.9336 51.7778 26.3659C52.1581 26.7964 52.6521 27.0125 53.2598 27.0125C53.9733 27.0125 54.5286 26.7336 54.9258 26.1803C55.3238 25.6251 55.5228 24.8933 55.5228 23.9839ZM67.259 23.9139C67.259 25.3776 66.8654 26.5345 66.0773 27.3838C65.3709 28.1399 64.4949 28.5174 63.4482 28.5174C62.3189 28.5174 61.5069 28.1112 61.0137 27.2968V31.8124H59.1195V22.5453C59.1195 21.6261 59.0955 20.6835 59.0493 19.7167H60.7152L60.8209 21.0808H60.8565C61.4873 20.053 62.446 19.5391 63.7334 19.5391C64.7383 19.5391 65.5779 19.94 66.2514 20.7427C66.9213 21.5472 67.259 22.6036 67.259 23.9139ZM65.3283 23.9839C65.3283 23.1462 65.1408 22.4557 64.7659 21.9113C64.3563 21.3454 63.8081 21.062 63.1186 21.062C62.6512 21.062 62.2265 21.2198 61.8454 21.531C61.4651 21.8449 61.2172 22.2548 61.1008 22.7624C61.0431 22.9992 61.012 23.192 61.012 23.3444V24.7803C61.012 25.4054 61.203 25.9336 61.5815 26.3659C61.9618 26.7955 62.4558 27.0125 63.0653 27.0125C63.7796 27.0125 64.3349 26.7336 64.7312 26.1803C65.1293 25.6251 65.3283 24.8933 65.3283 23.9839ZM78.223 24.9749C78.223 25.991 77.8712 26.817 77.1719 27.4547C76.4025 28.1506 75.3283 28.4995 73.9511 28.4995C72.6788 28.4995 71.6588 28.252 70.8894 27.756L71.3274 26.1623C72.1581 26.6592 73.0706 26.9067 74.064 26.9067C74.7783 26.9067 75.3336 26.7435 75.7299 26.4197C76.127 26.0951 76.3278 25.661 76.3278 25.1193C76.3278 24.6341 76.1617 24.2278 75.8356 23.8969C75.5078 23.5669 74.9658 23.2592 74.2043 22.9767C72.1341 22.1974 71.0982 21.0575 71.0982 19.558C71.0982 18.5786 71.4642 17.7768 72.1946 17.1499C72.9249 16.5239 73.8934 16.2109 75.0982 16.2109C76.1741 16.2109 77.0706 16.4002 77.7823 16.7777L77.307 18.3365C76.637 17.9705 75.8809 17.7876 75.0351 17.7876C74.3669 17.7876 73.8427 17.9535 73.4678 18.2835C73.1524 18.5786 72.9924 18.9382 72.9924 19.3651C72.9924 19.836 73.1746 20.227 73.5371 20.5337C73.8516 20.8162 74.4256 21.1238 75.2554 21.4539C76.2736 21.8682 77.0218 22.3507 77.5007 22.905C77.9831 23.4592 78.223 24.1507 78.223 24.9749ZM84.502 21.1517H82.414V25.33C82.414 26.3928 82.7819 26.9228 83.5193 26.9228C83.8578 26.9228 84.1386 26.8941 84.3607 26.8341L84.4132 28.286C84.04 28.4269 83.5486 28.4977 82.94 28.4977C82.1919 28.4977 81.6073 28.2672 81.1853 27.8062C80.765 27.3453 80.5535 26.5731 80.5535 25.4861V21.1481H79.3096V19.7131H80.5535V18.1374L82.414 17.5706V19.7131H84.502V21.1517ZM93.9041 23.9489C93.9041 25.2718 93.5291 26.3578 92.781 27.2071C91.9982 28.0816 90.9569 28.5174 89.6588 28.5174C88.4061 28.5174 87.41 28.0986 86.6673 27.2619C85.9245 26.4233 85.5531 25.3668 85.5531 24.0924C85.5531 22.7588 85.9369 21.6664 86.7019 20.8171C87.4687 19.9669 88.5011 19.5418 89.7992 19.5418C91.0502 19.5418 92.0551 19.9615 92.8157 20.7992C93.5424 21.6117 93.9041 22.661 93.9041 23.9489ZM91.9405 23.9929C91.9405 23.2045 91.7717 22.5283 91.4332 21.9624C91.036 21.279 90.4674 20.9373 89.7308 20.9373C88.972 20.9373 88.3901 21.279 87.9938 21.9624C87.6544 22.5283 87.4856 23.2162 87.4856 24.0287C87.4856 24.818 87.6544 25.496 87.9938 26.0601C88.4034 26.7435 88.9747 27.0852 89.7148 27.0852C90.4389 27.0852 91.0067 26.7363 91.4172 26.043C91.7655 25.4637 91.9405 24.783 91.9405 23.9929ZM100.064 21.3983C99.867 21.3624 99.6671 21.3447 99.4669 21.3454C98.8006 21.3454 98.2852 21.5983 97.9227 22.1077C97.6082 22.5561 97.4501 23.1229 97.4501 23.8072V28.3228H95.5558V22.427C95.5575 21.5235 95.5391 20.6202 95.5007 19.7176H97.1506L97.2199 21.3642H97.2724C97.4732 20.7983 97.7877 20.3418 98.2195 20.0001C98.6147 19.7015 99.095 19.5398 99.5887 19.5391C99.7637 19.5391 99.9218 19.5517 100.062 19.5741L100.064 21.3983ZM108.536 23.6126C108.541 23.9033 108.517 24.1937 108.467 24.4798H102.784C102.805 25.33 103.08 25.9812 103.608 26.4296C104.087 26.8296 104.706 27.0305 105.467 27.0305C106.308 27.0305 107.076 26.8959 107.766 26.6242L108.063 27.9506C107.256 28.3058 106.304 28.4825 105.205 28.4825C103.883 28.4825 102.845 28.0896 102.09 27.3058C101.336 26.5211 100.959 25.4664 100.959 24.1453C100.959 22.8485 101.31 21.7678 102.012 20.9059C102.748 19.9858 103.742 19.5257 104.993 19.5257C106.222 19.5257 107.152 19.9858 107.784 20.9059C108.284 21.6351 108.536 22.5391 108.536 23.6126ZM106.729 23.1166C106.743 22.5489 106.618 22.0602 106.362 21.6467C106.034 21.114 105.529 20.8485 104.853 20.8485C104.234 20.8485 103.729 21.1077 103.345 21.6279C103.03 22.0413 102.842 22.5382 102.785 23.1148L106.729 23.1166Z'
                            fill='white'
                          />
                          <path
                            d='M40.1697 12.1676C39.6428 12.1676 39.187 12.1416 38.8076 12.0977V6.32737C39.3382 6.24463 39.8744 6.20385 40.4114 6.2054C42.5837 6.2054 43.5842 7.2843 43.5842 9.04301C43.5842 11.0717 42.4025 12.1676 40.1697 12.1676ZM40.4878 6.94529C40.1946 6.94529 39.9449 6.96323 39.7379 7.00628V11.3927C39.8498 11.4107 40.0648 11.4188 40.3669 11.4188C41.7903 11.4188 42.6006 10.6008 42.6006 9.06902C42.6006 7.70313 41.8676 6.94529 40.4878 6.94529ZM46.7019 12.2116C45.4776 12.2116 44.6841 11.2887 44.6841 10.0358C44.6841 8.73001 45.4944 7.79909 46.7712 7.79909C47.9778 7.79909 48.789 8.678 48.789 9.96676C48.789 11.2887 47.9529 12.2116 46.7019 12.2116ZM46.7374 8.48607C46.0648 8.48607 45.6339 9.12104 45.6339 10.0089C45.6339 10.8797 46.0737 11.5147 46.7286 11.5147C47.3834 11.5147 47.8232 10.8358 47.8232 9.99098C47.8232 9.13001 47.3923 8.48607 46.7374 8.48607ZM55.7708 7.88608L54.4602 12.1156H53.6064L53.0635 10.2789C52.9285 9.82959 52.8162 9.37371 52.7268 8.91297H52.709C52.6406 9.37395 52.5109 9.83582 52.3732 10.2789L51.7956 12.1156H50.9329L49.6997 7.88608H50.6566L51.131 9.89681C51.243 10.3757 51.3372 10.8277 51.4154 11.2546H51.4331C51.5015 10.8986 51.6135 10.4537 51.7779 9.90578L52.3732 7.88698H53.1319L53.7015 9.86273C53.8392 10.3416 53.9511 10.8116 54.0382 11.2555H54.0631C54.1235 10.8206 54.2186 10.3587 54.3474 9.86273L54.8565 7.88698L55.7708 7.88608ZM60.5953 12.1156H59.6642V9.68695C59.6642 8.93898 59.3798 8.5641 58.8192 8.5641C58.2674 8.5641 57.8881 9.04301 57.8881 9.59995V12.1156H56.9569V9.09503C56.9569 8.72105 56.948 8.32016 56.9223 7.88519H57.7415L57.785 8.53809H57.8108C58.0613 8.08608 58.5695 7.79909 59.1391 7.79909C60.0187 7.79909 60.5962 8.478 60.5962 9.58291L60.5953 12.1156ZM63.163 12.1156H62.231V5.94531H63.163V12.1156ZM66.558 12.2116C65.3345 12.2116 64.5402 11.2887 64.5402 10.0358C64.5402 8.73001 65.3505 7.79909 66.6264 7.79909C67.8339 7.79909 68.6442 8.678 68.6442 9.96676C68.6451 11.2887 67.8081 12.2116 66.558 12.2116ZM66.5926 8.48607C65.92 8.48607 65.4891 9.12104 65.4891 10.0089C65.4891 10.8797 65.9298 11.5147 66.5829 11.5147C67.2386 11.5147 67.6775 10.8358 67.6775 9.99098C67.6784 9.13001 67.2484 8.48607 66.5926 8.48607ZM72.3154 12.1156L72.2479 11.6286H72.223C71.9387 12.0205 71.5238 12.2116 70.9978 12.2116C70.247 12.2116 69.7139 11.6806 69.7139 10.9667C69.7139 9.92282 70.6104 9.38292 72.1626 9.38292V9.30489C72.1626 8.74795 71.8703 8.46903 71.2928 8.46903C70.8796 8.46903 70.5171 8.57396 70.1982 8.78293L70.0089 8.165C70.3963 7.92106 70.8796 7.79909 71.4474 7.79909C72.542 7.79909 73.0947 8.38204 73.0947 9.54883V11.1067C73.0947 11.5335 73.1133 11.8645 73.1551 12.1165L72.3154 12.1156ZM72.1875 10.0089C71.1533 10.0089 70.6344 10.2618 70.6344 10.8618C70.6344 11.3058 70.9018 11.5228 71.2732 11.5228C71.7468 11.5228 72.1875 11.1578 72.1875 10.6618V10.0089ZM77.6162 12.1156L77.5727 11.4367H77.5469C77.2795 11.9497 76.8299 12.2116 76.2017 12.2116C75.1915 12.2116 74.4434 11.3147 74.4434 10.0529C74.4434 8.73001 75.219 7.79819 76.2781 7.79819C76.8388 7.79819 77.2359 7.98922 77.4598 8.37307H77.4785V5.94531H78.4105V10.9757C78.4105 11.3847 78.4203 11.7676 78.4452 12.1156H77.6162ZM77.4785 9.62686C77.4785 9.03494 77.0902 8.53002 76.4976 8.53002C75.8072 8.53002 75.3852 9.14794 75.3852 10.0179C75.3852 10.8708 75.8232 11.4546 76.4789 11.4546C77.0645 11.4546 77.4785 10.9407 77.4785 10.3318V9.62686ZM84.3199 12.2116C83.0964 12.2116 82.303 11.2887 82.303 10.0358C82.303 8.73001 83.1133 7.79909 84.3892 7.79909C85.5967 7.79909 86.407 8.678 86.407 9.96676C86.4079 11.2887 85.5718 12.2116 84.3199 12.2116ZM84.3546 8.48607C83.6829 8.48607 83.2519 9.12104 83.2519 10.0089C83.2519 10.8797 83.6917 11.5147 84.3457 11.5147C85.0014 11.5147 85.4403 10.8358 85.4403 9.99098C85.4421 9.13001 85.0112 8.48607 84.3546 8.48607ZM91.4145 12.1156H90.4825V9.68695C90.4825 8.93898 90.1982 8.5641 89.6376 8.5641C89.0858 8.5641 88.7073 9.04301 88.7073 9.59995V12.1156H87.7753V9.09503C87.7753 8.72105 87.7664 8.32016 87.7406 7.88519H88.5598L88.6033 8.53809H88.6291C88.8788 8.08608 89.3879 7.79819 89.9565 7.79819C90.8361 7.79819 91.4145 8.4771 91.4145 9.58202V12.1156ZM97.6793 8.591H96.6549V10.6448C96.6549 11.1676 96.8344 11.4286 97.1969 11.4286C97.3612 11.4286 97.499 11.4107 97.61 11.3847L97.6358 12.0986C97.4554 12.1685 97.2137 12.2035 96.9134 12.2035C96.1795 12.2035 95.7406 11.7945 95.7406 10.7237V8.591H95.1293V7.88608H95.7406V7.11121L96.6549 6.83229V7.88519H97.6793V8.591ZM102.609 12.1156H101.678V9.70488C101.678 8.94795 101.395 8.56499 100.833 8.56499C100.351 8.56499 99.9015 8.89593 99.9015 9.56587V12.1156H98.9712V5.94531H99.9015V8.48607H99.9201C100.213 8.02509 100.638 7.79819 101.18 7.79819C102.067 7.79819 102.609 8.49414 102.609 9.59995V12.1156ZM107.659 10.2268H104.865C104.882 11.0277 105.407 11.4797 106.185 11.4797C106.598 11.4797 106.978 11.4098 107.314 11.2797L107.459 11.9326C107.063 12.1066 106.596 12.1936 106.053 12.1936C104.743 12.1936 103.967 11.3578 103.967 10.0618C103.967 8.76499 104.762 7.79012 105.949 7.79012C107.019 7.79012 107.691 8.591 107.691 9.80085C107.697 9.94362 107.686 10.0866 107.659 10.2268ZM106.805 9.5569C106.805 8.904 106.479 8.44302 105.884 8.44302C105.349 8.44302 104.926 8.91297 104.865 9.5569H106.805Z'
                            fill='white'
                          />
                        </g>
                        <defs>
                          <linearGradient
                            id='paint0_linear_1174_23455'
                            x1='87.9248'
                            y1='36.0275'
                            x2='87.9248'
                            y2='-93.3151'
                            gradientUnits='userSpaceOnUse'
                          >
                            <stop stopColor='#1A1A1A' stopOpacity='0.1' />
                            <stop offset='0.123' stopColor='#212121' stopOpacity='0.151' />
                            <stop offset='0.308' stopColor='#353535' stopOpacity='0.227' />
                            <stop offset='0.532' stopColor='#575757' stopOpacity='0.318' />
                            <stop offset='0.783' stopColor='#858585' stopOpacity='0.421' />
                            <stop offset='1' stopColor='#B3B3B3' stopOpacity='0.51' />
                          </linearGradient>
                          <clipPath id='clip0_1174_23455'>
                            <rect width='120' height='36' fill='white' />
                          </clipPath>
                        </defs>
                      </svg>
                    </button>
                    <button
                      className=' cursor-pointer'
                      onClick={() =>
                        window.open(
                          'https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2',
                          '_blank'
                        )
                      }
                    >
                      <svg xmlns='http://www.w3.org/2000/svg' width='120' height='36' viewBox='0 0 120 36' fill='none'>
                        <g clipPath='url(#clip0_1174_23466)'>
                          <path
                            d='M115.553 36.0003H4.44677C2.00237 36.0003 0.00244141 33.9754 0.00244141 31.5004V4.50089C0.00244141 2.02592 2.00237 0.000976562 4.44677 0.000976562H115.553C117.998 0.000976562 119.998 2.02592 119.998 4.50089V31.5004C119.998 33.9754 117.998 36.0003 115.553 36.0003Z'
                            fill='#100F0D'
                          />
                          <path
                            d='M115.553 0.000976562H4.44677C2.00237 0.000976562 0.00244141 2.02592 0.00244141 4.50089V31.5004C0.00244141 33.9754 2.00237 36.0003 4.44677 36.0003H115.553C117.998 36.0003 119.998 33.9754 119.998 31.5004V4.50089C119.998 2.02592 117.998 0.000976562 115.553 0.000976562ZM115.553 0.720599C117.612 0.720599 119.287 2.41655 119.287 4.50089V31.5004C119.287 33.5847 117.612 35.2807 115.553 35.2807H4.44677C2.38817 35.2807 0.713908 33.5847 0.713908 31.5004V4.50089C0.713908 2.41655 2.38817 0.720599 4.44677 0.720599H115.553Z'
                            fill='#A2A2A1'
                          />
                          <path
                            d='M95.0535 27.0003H96.7121V15.7487H95.0535V27.0003ZM109.993 19.8021L108.092 24.6799H108.035L106.061 19.8021H104.275L107.235 26.6196L105.547 30.4121H107.277L111.837 19.8024L109.993 19.8021ZM100.586 25.7222C100.044 25.7222 99.2857 25.4469 99.2857 24.7667C99.2857 23.8983 100.23 23.5654 101.044 23.5654C101.773 23.5654 102.117 23.7243 102.559 23.9416C102.431 24.9839 101.544 25.7222 100.586 25.7222ZM100.787 19.5559C99.5862 19.5559 98.3426 20.0917 97.828 21.2786L99.3 21.9009C99.6146 21.2786 100.2 21.0762 100.815 21.0762C101.673 21.0762 102.545 21.5968 102.559 22.5235V22.6391C102.259 22.4654 101.615 22.205 100.83 22.205C99.2421 22.205 97.6271 23.0877 97.6271 24.7379C97.6271 26.2433 98.9284 27.2132 100.386 27.2132C101.501 27.2132 102.117 26.7066 102.502 26.1129H102.559V26.9819H104.161V22.6679C104.161 20.6704 102.687 19.5559 100.787 19.5559ZM90.5364 21.1717H88.1773V17.3152H90.5364C91.7764 17.3152 92.4803 18.3544 92.4803 19.2434C92.4803 20.1153 91.7763 21.1717 90.5364 21.1717ZM90.4937 15.7489H86.5194V27.0006H88.1773V22.738H90.4938C92.332 22.738 94.139 21.3908 94.139 19.2438C94.139 17.0972 92.3319 15.7489 90.4937 15.7489ZM68.8224 25.7241C67.6765 25.7241 66.7175 24.7524 66.7175 23.419C66.7175 22.0701 67.6765 21.0846 68.8224 21.0846C69.9536 21.0846 70.8414 22.0701 70.8414 23.419C70.8414 24.7524 69.9536 25.7241 68.8224 25.7241ZM70.7268 20.4319H70.6695C70.2973 19.9825 69.581 19.5765 68.6793 19.5765C66.7887 19.5765 65.0561 21.2587 65.0561 23.419C65.0561 25.5646 66.7887 27.232 68.6793 27.232C69.581 27.232 70.2973 26.8259 70.6695 26.3622H70.7268V26.9127C70.7268 28.3777 69.9536 29.1602 68.7078 29.1602C67.6914 29.1602 67.0613 28.4209 66.8033 27.7975L65.3572 28.4064C65.7721 29.421 66.8745 30.6684 68.7078 30.6684C70.6557 30.6684 72.3025 29.5082 72.3025 26.6806V19.8084H70.7269L70.7268 20.4319ZM73.4483 27H75.1087V15.7483H73.4483V27ZM77.5576 23.2882C77.5149 21.8092 78.6895 21.0555 79.534 21.0555C80.193 21.0555 80.7509 21.3891 80.9378 21.8672L77.5576 23.2882ZM82.7127 22.0121C82.3978 21.1571 81.4384 19.5765 79.4766 19.5765C77.5288 19.5765 75.9108 21.1279 75.9108 23.4043C75.9108 25.5502 77.5149 27.232 79.6624 27.232C81.395 27.232 82.3978 26.1594 82.8134 25.5357L81.5245 24.6657C81.0947 25.3038 80.5079 25.7242 79.6624 25.7242C78.818 25.7242 78.2163 25.3326 77.8302 24.5641L82.8846 22.4474L82.7127 22.0121ZM42.44 20.751V22.3749H46.2777C46.1631 23.2883 45.8624 23.9552 45.4041 24.4192C44.8454 24.9845 43.9719 25.6082 42.44 25.6082C40.0771 25.6082 38.23 23.6799 38.23 21.2875C38.23 18.8952 40.0771 16.9666 42.44 16.9666C43.7145 16.9666 44.6451 17.4742 45.3325 18.1267L46.4641 16.981C45.5044 16.0532 44.2301 15.3428 42.44 15.3428C39.2032 15.3428 36.4824 18.0107 36.4824 21.2875C36.4824 24.5641 39.2032 27.232 42.44 27.232C44.1868 27.232 45.5044 26.652 46.5353 25.5646C47.595 24.4916 47.9245 22.9838 47.9245 21.7657C47.9245 21.3892 47.8956 21.0412 47.8384 20.751H42.44ZM52.288 25.7241C51.1422 25.7241 50.154 24.7672 50.154 23.4043C50.154 22.0269 51.1422 21.0847 52.288 21.0847C53.4334 21.0847 54.4216 22.0269 54.4216 23.4043C54.4216 24.7672 53.4334 25.7241 52.288 25.7241ZM52.288 19.5765C50.1967 19.5765 48.4929 21.1859 48.4929 23.4043C48.4929 25.6082 50.1967 27.232 52.288 27.232C54.3786 27.232 56.0827 25.6082 56.0827 23.4043C56.0827 21.1859 54.3786 19.5765 52.288 19.5765ZM60.566 25.7241C59.421 25.7241 58.4325 24.7672 58.4325 23.4043C58.4325 22.0269 59.421 21.0847 60.566 21.0847C61.7119 21.0847 62.6997 22.0269 62.6997 23.4043C62.6997 24.7672 61.7119 25.7241 60.566 25.7241ZM60.566 19.5765C58.4755 19.5765 56.7717 21.1859 56.7717 23.4043C56.7717 25.6082 58.4755 27.232 60.566 27.232C62.6574 27.232 64.3612 25.6082 64.3612 23.4043C64.3612 21.1859 62.6574 19.5765 60.566 19.5765Z'
                            fill='white'
                          />
                          <path
                            d='M18.4148 17.4816L8.95215 27.6512C8.9525 27.6533 8.95322 27.655 8.95355 27.6572C9.24376 28.7615 10.2399 29.5746 11.4222 29.5746C11.8948 29.5746 12.3385 29.4452 12.7191 29.2181L12.7493 29.2002L23.4013 22.9767L18.4148 17.4816Z'
                            fill='#EB3131'
                          />
                          <path
                            d='M27.9887 15.7505L27.9796 15.7443L23.3808 13.0449L18.1997 17.713L23.3988 22.9765L27.9734 20.304C28.7754 19.8656 29.3198 19.0095 29.3198 18.0223C29.3198 17.0422 28.7828 16.1904 27.9887 15.7505Z'
                            fill='#F6B60B'
                          />
                          <path
                            d='M8.95056 8.34961C8.89367 8.56201 8.86377 8.78448 8.86377 9.01551V26.9861C8.86377 27.2167 8.89332 27.44 8.95092 27.6516L18.7402 17.7419L8.95056 8.34961Z'
                            fill='#5778C5'
                          />
                          <path
                            d='M18.4845 18.0007L23.3827 13.0427L12.7427 6.79665C12.356 6.56212 11.9046 6.42676 11.4216 6.42676C10.2393 6.42676 9.24179 7.24135 8.95153 8.34694C8.95117 8.34802 8.95117 8.34876 8.95117 8.34971L18.4845 18.0007Z'
                            fill='#3BAD49'
                          />
                          <path
                            d='M42.1285 8.80388H39.5355V9.45358H41.4785C41.4257 9.98376 41.2174 10.4 40.866 10.7023C40.5147 11.0047 40.066 11.1566 39.5355 11.1566C38.9535 11.1566 38.4605 10.9513 38.0564 10.5435C37.6605 10.1273 37.4592 9.61253 37.4592 8.9924C37.4592 8.37231 37.6605 7.85758 38.0564 7.44138C38.4605 7.03359 38.9536 6.82966 39.5355 6.82966C39.8341 6.82966 40.1188 6.88168 40.3799 6.99562C40.641 7.10946 40.8507 7.2684 41.0146 7.47234L41.5077 6.97312C41.284 6.71573 41.0008 6.51889 40.6493 6.37544C40.2979 6.23198 39.9313 6.16313 39.5354 6.16313C38.7591 6.16313 38.1008 6.43592 37.5633 6.98016C37.0258 7.52573 36.7563 8.19793 36.7563 8.99241C36.7563 9.78689 37.0258 10.4605 37.5633 11.0048C38.1008 11.5489 38.7591 11.8218 39.5354 11.8218C40.3507 11.8218 41.0007 11.5574 41.5007 11.0202C41.9409 10.5731 42.1659 9.9684 42.1659 9.21186C42.1659 9.08388 42.1507 8.94734 42.1285 8.80388ZM43.133 6.28395V11.7008H46.2565V11.0356H43.8205V9.31726H46.0177V8.66756H43.8205V6.95055H46.2565V6.28393L43.133 6.28395ZM50.6363 6.95057V6.28395H46.96V6.95057H48.4545V11.7008H49.1419V6.95057H50.6363ZM53.9647 6.28395H53.2772V11.7008H53.9647V6.28395ZM58.5024 6.95057V6.28395H54.8261V6.95057H56.3205V11.7008H57.0079V6.95057H58.5024ZM65.4397 6.98855C64.9092 6.43588 64.2592 6.16309 63.4828 6.16309C62.7051 6.16309 62.0551 6.43587 61.5245 6.98011C60.994 7.51731 60.7329 8.19087 60.7329 8.99237C60.7329 9.79387 60.994 10.4675 61.5245 11.0048C62.0551 11.5489 62.7051 11.8218 63.4828 11.8218C64.2522 11.8218 64.9091 11.5489 65.4397 11.0048C65.9703 10.4676 66.2313 9.79393 66.2313 8.99237C66.2313 8.19789 65.9703 7.52565 65.4397 6.98855ZM62.0176 7.44133C62.4134 7.03354 62.8995 6.82961 63.4828 6.82961C64.0647 6.82961 64.5509 7.03355 64.9397 7.44133C65.3356 7.84209 65.5299 8.36514 65.5299 8.99235C65.5299 9.62099 65.3356 10.1426 64.9397 10.5434C64.5509 10.9512 64.0647 11.1565 63.4828 11.1565C62.8995 11.1565 62.4134 10.9512 62.0176 10.5434C61.6301 10.1342 61.4357 9.62098 61.4357 8.99235C61.4357 8.36515 61.6301 7.85052 62.0176 7.44133ZM67.8647 8.32727L67.8355 7.28236H67.8647L70.5841 11.7007H71.3021V6.2839H70.6146V9.45352L70.6437 10.4984H70.6146L68.0147 6.2839H67.1772V11.7007H67.8647V8.32727Z'
                            fill='white'
                            stroke='white'
                            strokeWidth='0.26666'
                            strokeMiterlimit='10'
                          />
                        </g>
                        <defs>
                          <clipPath id='clip0_1174_23466'>
                            <rect width='120' height='36' fill='white' />
                          </clipPath>
                        </defs>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </Grid>
          </>
        )}

        {activeStep === 1 && (
          <Grid item xs={12}>
            <div className='flex gap-2'>
              <Typography className=' text-nowrap'>Step 2:</Typography>
              <Typography>{dictionary['profile']?.scanQr}</Typography>
            </div>
            <div className='mt-4 flex flex-col justify-center items-center'>
              {pendingQrcode && <p>Loading...</p>}
              {errorQrcode && <p>{errorQrcode?.message}</p>}
              {qrcode?.data?.qr_code && (
                <img src={qrcode?.data?.qr_code} alt='QR Code' style={{ width: '300px', height: '300px' }} />
              )}
            </div>
          </Grid>
        )}

        {activeStep === 2 && (
          <Grid item xs={12} className='flex flex-col gap-4'>
            <div className='flex gap-2 '>
              <Typography className=' text-nowrap'>Step 3:</Typography>
              <Typography variant='h6'>{dictionary['profile']?.enterCompleteGoogle}</Typography>
            </div>
            <Typography className='text-center'>{dictionary['profile']?.getCodeGoogle}</Typography>
            <CodeInput onComplete={code => handleKeepGooleCode(code)} />
          </Grid>
        )}
      </Grid>

      <Grid item xs={12} className='flex items-center justify-between gap-2'>
        <Button variant='outlined' onClick={prevStep} disabled={activeStep === 0}>
          {dictionary?.previous}
        </Button>
        {activeStep < 2 ? (
          <Button variant='contained' onClick={nextStep}>
            {dictionary?.next}
          </Button>
        ) : (
          <Button
            variant='contained'
            color='success'
            onClick={() => {
              handleSetGoogle(googleCode)
            }}
            disabled={googleCode.length < 6 || isPending}
          >
            {dictionary?.verify}
          </Button>
        )}
      </Grid>
    </Grid>
  )
}

export default GoogleAuthVerifyDialog
